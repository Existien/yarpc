/* Generated by YARPC
 * Version:  {{version}}
 * Definition:
 *   File: {{ object.definitionPath }}
 *   Object: {{ object.name }}
 *   Template: qt6/service_source.j2
 */
{% import "dbus/common.j2" as dbus %}
{% import "qt6/common.j2" as qt6 %}
#include "{{ target.className }}Adaptor.hpp"

using namespace {{ qt6.namespace(output) }};

{{ target.className }}Adaptor::{{ target.className }}Adaptor({{ target.className }}* iface, QObject* parent) : m_iface(iface), QDBusAbstractAdaptor(parent) {

}

{% for member in object.members %}
{% if member.kind == 'method' %}
{% if member.returns is defined %}
{% set return_type = qt6.type(member.returns.type, output.objects) %}
{% else %}
{% set return_type = "void" %}
{% endif %}
{{ return_type }} {{ target.className }}Adaptor::{{ member.name }}(
    {% if member.args|count > 0 %}
    {{ qt6.funcparams(member, output.objects)|indent(4) }},
    {% endif %}
    const QDBusMessage &_message
){
    _message.setDelayedReply(true);
    m_iface->handle{{ member.name }}Called(_message);
    {% if member.returns is defined %}
    return {};
    {% endif %}
}

{% endif %}
{% if member.kind == 'property' %}
{{ qt6.type(member.type, output.objects)}} {{ target.className }}Adaptor::get{{ member.name }}() const {
    return m_iface->get{{ member.name }}();
}

{% if member.readonly != True %}
void {{ target.className }}Adaptor::set{{ member.name }}(const {{ qt6.type(member.type, output.objects) }} &value ) {
    emit m_iface->property{{ member.name }}Set(value);
}

{% endif %}
{% endif %}
{% endfor %}
