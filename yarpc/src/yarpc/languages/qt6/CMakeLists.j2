# Generated by YARPC
# Version:  {{version}}
# Definition:
#   File: {{ output.definitionPath }}
#   Template: qt6/CMakeLists.j2

{% set module_name = output.location.split('/')[-1] %}
{% set module_name = module_name|pascal_case %}
qt_add_qml_module({{ module_name }}
    STATIC
    PLUGIN_TARGET {{ module_name }}
    URI "{{ output.qmlUri }}"
    VERSION 1.0
    SOURCES
        Connection.cpp
        DBusError.cpp
        types.cpp
        {% for service in output.services %}
        {{ service.className }}.cpp
        {{ service.className }}Adaptor.cpp
        {% endfor %}
        {% for client in output.clients %}
        {{ client.className }}.cpp
        {% endfor %}
        {% for object in output.objects|selectattr('kind', 'equalto', 'struct') %}
        {{ object.name }}.cpp
        {% endfor %}
)

target_link_libraries({{ module_name }} PUBLIC Qt6::DBus)
